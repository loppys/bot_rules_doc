# Документация по написанию правил

## Написание переменной и уточняющих префиксов
- переменная должна быть обозначена символом `#` (`#USER_ACTIVITY#`, где `USER_ACTIVITY` является переменной)
- префикс должен быть внутри переменной и иметь разделитель `:`, например: `#D:USERNAME#` - в таком случае `USERNAME` будет взят напрямую из дискорда
- Префиксы для переменных необходимо устанавливать только тогда, когда требуется указать точный истоник (дискорд/база данных бота).
- Если источник не будет указан, то будет взято первое найденное значение.

## Описание префиксов
- `D` - источник discord
- `B` - источник база данных бота
- `F` - будет получено первое значение (даже если оно пустое)
- `A` - будут выбраны все значения и сохранены в виде массива

## функции для работы с массивами (отсчёт элементов начинается с `0`)
- `count(array)` - функция для получения количества элементов в массиве, например: `count(#USER_ROLES#)` в данном примере будет получено количество ролей, которые присвоены пользователю
- `arr_index(array, index)` - функция для получения указанного элемента массива, напирмер: `arr_index(#USER_ROLES#, 0)` в данном случае будет получен 1 элемент массива

## Основные переменные (устанавливаются автоматически)
- `USER_ACTIVITY` (строка) - текущая активность пользователя
- `USER_ROLES` (массив) - список ролей пользователя
- `MESSAGE` (строка) - последнее отправленное сообщение пользователем (текущая переменная не поддерживает вложения)
- `USERNAME` - имя пользователя
- `USER_JOIN_DATE` - дата присоединения к серверу
- `USER_JOIN_VOICE_TIME` - время нахождения в голосовом чате
- `USER_MESSAGE_COUNT` - количество сообщений у пользователя
- `null` - null значение (так же можно указывать без `#`)

## Написание условий
В условии разрешены все операторы сравнения
> Обратите внимание, что значение необходимо указывать в `''`, искючением являются числа
-  `==` - равно
-  `!=` - не равно
-  `>` - больше
-  `>=` - больше или равно
-  `<` - меньше
-  `<=` - меньше или равно

Так же разрешены следующие операторы:
- `&&` - оператор и
- `||` - оператор или

> Переменная и оператор должны обязательно быть написаны через пробел

## Пример условия и их расшифровка:
- `count(#USER_ROLES#) > 2` Если количество ролей у пользователя больше 2, то будет истина
- `#USER_ACTIVITY# == 'Paint'` Если активность пользователя равняется значению `Paint`, то будет истина
- `#MESSAGE# == #D:USERNAME# && arr_index(#USER_ROLES#, 0) != null` Если сообщение пользователя равняется имени пользователя и если первая роль пользователя не является пустой, то будет истина

> Слишком сложные условия не стоит писать, лучше написать несколько правил с набором простых условий. (для ролей можно указать сразу несколько правил)
